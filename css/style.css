/* Basic reset */
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans TC', 'Noto Sans', Arial, 'PingFang TC', 'Microsoft JhengHei', sans-serif; }

/* Layout */
.site-header { position: sticky; top: 0; background: #111; color: #fff; padding: 8px 12px; z-index: 10; }
.site-header h1 { font-size: 16px; margin: 0; }
.toc { position: sticky; top: 44px; margin: 8px 0 4px; padding: 6px; border: 1px solid #e5e7eb; border-radius: 8px; background: #fff; box-shadow: 0 1px 2px rgba(0,0,0,0.04); overflow-x: auto; white-space: nowrap; }
.toc a { display: inline-block; padding: 4px 8px; color: #0f2a6b; text-decoration: none; border-radius: 6px; margin-right: 6px; font-size: 13px; }
.toc a:hover { background: #eef4ff; }

.container { width: 100%; max-width: none; margin: 12px 0; padding: 0 12px; display: grid; grid-template-columns: 1fr; gap: 10px; }
/* Force single column per request */
@media (min-width: 720px) { .container { grid-template-columns: 1fr; } }

.page-title { grid-column: 1 / -1; }
.date-title { font-size: 18px; font-weight: 700; }

/* controls removed */

.card { background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px; box-shadow: 0 1px 2px rgba(0,0,0,0.04); }
.card-title { margin: 0 0 10px; font-size: 18px; }
.day { margin-bottom: 18px; }
.day { scroll-margin-top: 96px; }
.day .date-title {
  margin-bottom: 10px;
  background: #eef4ff;            /* 淡藍底，閱讀友善 */
  color: #0f2a6b;                  /* 深藍字色 */
  padding: 10px 12px;
  border: 1px solid #dbe4ff;      /* 柔和邊框 */
  border-radius: 10px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}

/* Fitness notes block shares the same background as date title */
.day .fitness-notes {
  background: #eef4ff;
  color: #0f2a6b;
  padding: 8px 12px 12px;
  border: 1px solid #dbe4ff;
  border-top: none;                 /* 視覺銜接日期標題 */
  border-radius: 0 0 10px 10px;     /* 與標題圓角連續 */
  margin: -8px 0 10px;              /* 稍微上貼標題，形成同一區塊感 */
}
.day .fitness-notes li {
  padding: 4px 0;
  border-bottom: none;              /* 去掉虛線，避免在淺底上不明顯 */
}

.kv { font-size: 16px; color: #111; }
.list { list-style: none; padding: 0; margin: 0; }
.list li { padding: 8px 0; border-bottom: 1px dashed #eee; }
.list li:last-child { border-bottom: none; }

.diet-item { padding: 8px 0; border-bottom: 1px dashed #eee; }
.diet-item:last-child { border-bottom: none; }
.diet-meta { font-size: 14px; color: #555; }
.diet-item .item-text { font-size: 16px; margin-top: 4px; }

.sleep-hours { font-weight: 700; }

.photo-strip { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 6px; align-items: center; }
.photo-strip img { height: auto; max-height: 200px; width: auto; max-width: 100%; border-radius: 10px; object-fit: contain; background: #eee; display: block; }

/* 預設隱藏左側欄位標籤（手機一欄顯示時不需要） */
.row-label { display: none; }
.left-rail { display: none; }

/* Dark mode (prefers) */
@media (prefers-color-scheme: dark) {
  body { background: #0b0b0b; color: #eaeaea; }
  .toc { background: #141414; border-color: #222; }
  .toc a { color: #cbd5e1; }
  .toc a:hover { background: #1f2937; }
  .card { background: #141414; border-color: #222; }
  .list li { border-bottom-color: #222; }
  .diet-item { background: #101010; border-color: #222; }
  .day .date-title {
    background: #0f172a;          /* 深色底 */
    color: #cbd5e1;               /* 淡灰藍字色 */
    border-color: #1f2937;
  }
  .day .fitness-notes {
    background: #0f172a;
    color: #cbd5e1;
    border-color: #1f2937;
  }
}

/* Wide-screen three-column layout per day:
   左：欄位標題（睡覺/運動/飲食）
   中：原本內容（清單）
   右：實物照片（填滿當天高度） */
@media (min-width: 720px) {
  .day {
    display: grid;
    /* 左欄固定，中欄固定，右欄彈性 */
    grid-template-columns: 200px 360px 1fr;
    /* 明確定義每一列的區塊，確保左右同列高度一致 */
    grid-template-areas:
      "title title title"
      "notes notes notes"
      "label-sleep sleep photos"
      "label-exercise exercise photos"
      "label-diet diet photos";
    gap: 12px;
  }
  /* 日期標題、備註跨三欄 */
  .day .date-title { grid-area: title; }
  .day .fitness-notes { grid-area: notes; }
  /* 左欄標籤（只有睡覺/飲食兩列；運動這列預留空位以維持行高對齊） */
  .day .row-label { 
    display: block; 
    font-weight: 700; 
    color: #0f2a6b; 
    padding: 8px; 
    border: 1px solid #e5e7eb; 
    border-radius: 10px; 
    background: #fff;
    white-space: nowrap;
    overflow-x: auto;
    overflow-y: hidden;
  }
  .day .row-label--sleep { grid-area: label-sleep; }
  .day .row-label--exercise { grid-area: label-exercise; }
  .day .row-label--diet { grid-area: label-diet; }
  /* 內容卡片（中欄） */
  .day .sleep-card { grid-area: sleep; }
  .day .exercise-card { grid-area: exercise; }
  .day .diet-card { grid-area: diet; }
  .day .card {
    white-space: nowrap; 
    overflow-x: auto; 
    overflow-y: hidden;
  }
  /* 右側照片欄：維持水平捲動的條帶樣式 */
  .day .photo-card { grid-area: photos; align-self: stretch; }
  .day .photo-card .photo-strip img {
    max-height: 300px;
  }
  /* 寬螢幕時僅隱藏「睡覺/飲食」卡片標題，運動保留標題於中欄 */
  .day .sleep-card .card-title,
  .day .diet-card .card-title,
  .day .exercise-card .card-title { display: none; }
}

/* Lightbox */
.no-scroll { overflow: hidden; }
#lightbox-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.9);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  cursor: zoom-out;
}
#lightbox-overlay.open { display: flex; }
#lightbox-overlay img {
  max-width: 90vw;
  max-height: 90vh;
  transform: scale(1);
  transition: transform 0.08s ease-out;
  touch-action: none; /* allow custom pinch handling */
  user-select: none;
}


